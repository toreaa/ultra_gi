# Story 5.4: Logg ubehag

## Status
**Draft**

## Story
**As a** user in session mode, **I want** to have a large button to log discomfort with a quick 1-5 scale, **so that** I can track GI issues during my session.

## Acceptance Criteria
1. Aktiv økt-skjerm viser: **Stor "UBEHAG"-knapp** (rød/oransje, ved siden av/under INNTAK)
2. Trykk på "UBEHAG"-knapp: Vis quick-select 1-5 skala (store knapper), Valgfritt: Type (dropdown), Valgfritt: Notat
3. Trykk på nivå (1-5) → Logg umiddelbart, Toast: "✓ Ubehag logget (nivå 3)", Event lagres: event_type='discomfort'
4. Event vises i liste: "01:05 - ⚠️ Ubehag (3/5) - Kvalme"

## Tasks / Subtasks
- [ ] Create `src/components/session/DiscomfortButton.tsx` (large red/orange button)
- [ ] Create discomfort quick-select modal (1-5 scale buttons)
- [ ] Add optional type dropdown: Kvalme, Kramper, Oppblåsthet, Diaré, Annet
- [ ] Add optional notes TextInput
- [ ] Implement `sessionManager.logDiscomfort(level, type?, notes?)`
- [ ] INSERT INTO session_events with event_type='discomfort'
- [ ] Store data_json: {level, type, notes}
- [ ] Display discomfort events in SessionEventList with ⚠️ icon

## Dev Notes
**data_json format:**
```json
{
  "level": 3,
  "type": "nausea",
  "notes": "Oppstod etter gel"
}
```

**Component:**
```typescript
<DiscomfortButton onPress={() => setShowDiscomfortModal(true)} />

<Portal>
  <Dialog visible={showDiscomfortModal}>
    <Dialog.Title>Logg ubehag</Dialog.Title>
    <Dialog.Content>
      <View style={{flexDirection: 'row', justifyContent: 'space-around'}}>
        {[1, 2, 3, 4, 5].map(level => (
          <Button key={level} onPress={() => handleLogDiscomfort(level)}>
            {level}
          </Button>
        ))}
      </View>
      <Select label="Type (valgfritt)" options={['Kvalme', 'Kramper', 'Oppblåsthet', 'Diaré', 'Annet']} />
      <TextInput label="Notater (valgfritt)" multiline />
    </Dialog.Content>
  </Dialog>
</Portal>
```

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-23 | 1.0 | Initial story | Bob (SM) |

## Dev Agent Record
*To be filled*

## QA Results
*To be filled*
