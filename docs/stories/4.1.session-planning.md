# Story 4.1: Velg økt → ernæringsplan

## Status
**Draft**

## Story
**As a** user, **when** I select today's program session, **I want** the app to create a concrete nutrition plan, **so that** I know exactly what to take and when.

## Acceptance Criteria
1. Bruker kommer til planleggingsskjerm ved: Trykk på økt fra program-detaljer, Dashboard "Planlegg neste økt", Meny "Start spontan økt"
2. Skjerm viser økt-info: Program + Uke/Økt, Varighet, Mål-intensitet, Intensitetssone
3. Appen beregner totalt karb-behov: Formula: `(duration_minutes / 60) * carb_rate_g_per_hour`, Vis: "Du trenger ca. 56g karbohydrater for denne økten"
4. Appen foreslår produkter fra skafferi (Story 4.2)
5. Knapp: "Lag plan" (går til Story 4.2)

## Tasks / Subtasks
- [ ] Create `src/screens/session/SessionPlanScreen.tsx`
- [ ] Load program_session details via ProgramRepository
- [ ] Calculate required carbs: `(duration / 60) * carbRate`
- [ ] Display session info (program, week, duration, target rate)
- [ ] Add "Lag plan" button → navigate to fuel selector
- [ ] Handle spontaneous sessions (no program selected)

## Dev Notes
**Calculation:**
```typescript
const totalCarbs = Math.round((session.duration_minutes / 60) * session.carb_rate_g_per_hour);
// Example: (75 / 60) * 45 = 56.25g → 56g
```

**Component:**
```typescript
<SessionPlanScreen>
  <Card>
    <Text>Program: {program.name}</Text>
    <Text>Uke {session.week_number}, Økt {session.session_number}</Text>
    <Text>Varighet: {session.duration_minutes} min</Text>
    <Text>Mål: {session.carb_rate_g_per_hour}g/t @ {session.intensity_zone}</Text>
  </Card>
  <Text>Du trenger ca. {totalCarbs}g karbohydrater</Text>
  <Button onPress={() => navigate('FuelSelector')}>Lag plan</Button>
</SessionPlanScreen>
```

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-23 | 1.0 | Initial story | Bob (SM) |

## Dev Agent Record
*To be filled*

## QA Results
*To be filled*
